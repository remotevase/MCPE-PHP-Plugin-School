<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Plugin School  by ImagicalDevs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Plugin School </h1>
      <h2 class="project-tagline">Learn How to Code</h2>
    <a href="index.html" class="btn">Home Page</a>
    <a href="lesson1.html" class="btn">Lesson Number 1</a>
    <a href="lesson2.html" class="btn">Lesson Number 2</a>
    <a href="lesson3.html" class="btn">Lesson Number 3</a>
    <a href="pluginyml.html" class="btn">Sample plugin.yml</a>
    </section>

    <section class="main-content">
<h2>Volume 1: Basics and Concepts</h2>
<p><strong>Lesson 3: Using Player Events</strong></p>

<p> You know the basics! SO what now? Now we are going to learn about something that makes plugins how they are! Player Events\Events...In this lesson we will be focusing on PlayerJoinEvent and PlayerQuitEvent - Two Major Events! 

To apply this in your plugin import these USE Statements! Remember "use" statements? import the following: </p>
<code>// Event when Player Joins
use pocketmine\event\player\PlayerJoinEvent;

// Event When Player Quits
use pocketmine\event\player\PlayerQuitEvent;

// Player "class" in ImagicalMine
use pocketmine\Player;

// Server "class" in ImagicalMine
use pocketmine\Server;

// Event Listener
use pocketmine\event\Listener;</code>

<p> Since we are using events now, we change the class staement a bit: </p>
<code>class Main extends PluginBase implements Listener{</code>

<p> For the onEnable() function we add this line right after public function onEnable() (Since we are USING EVENTS!!!) </p>
<code>public function onEnable(){
     $this->getServer()->getPluginManager()->registerEvents($this,$this); // THIS LINE
     $this->getLogger()->info("Plugin Enabled");</code>

<p>Do you want to broadcast a message on the server saying someone joined in a FANCY way? Then we are going to use another function!!! Here: </p>
<code>public function onJoin(PlayerJoinEvent $event){
   $player = $event->getPlayer();
   $name = $player->getName();
   $this->getServer()->broadcastMessage("$name Joined The COOL Server! OMG Guys, LOL!");
   </code>
<p>Did you know: getPlayer() and getName() are public functions? these are how NEW Functions are made! onJoin is a new public function! People who know JavaScript may know this!

It's Cool That You Got A Join Message but, do you want in COLOR? Import this "use" statement to your code: </p>
<code>// Text Format formats text and changes Color

use pocketmine\utils\TextFormat;</code>

<p>Now for your message:</p>
<code>$this->getServer()->broadcastMessage(TextFormat::GREEN."$name Joined The COOL Server! OMG Guys, LOL!");</code>

<p> Now the Color of your message will be Green!

NOTE: Instead of using getPlayer() in PlayerDeathEvent, make sure you use getEntity() or it will crash your server for everytime someone dies.

A LIST of PLAYER events could be found here: <a href="https://github.com/ImagicalMine/ImagicalMine/tree/master/src/pocketmine/event/player">ClickMeBro</a>
Volume 1 End </p>
    </section>

  
  </body>
</html>
